<apex:page standardController="Address__c" extensions="AddressExtension" >

    <apex:form id="formId">
		                
        <apex:pageBlock title="Edit Existing Address" id="mainBlock" mode="edit">
        
        	<!-- BUTTONS -->        
            <apex:pageBlockButtons >
                <apex:commandButton action="{!updateExistingAddress}" value="Save" rerender="mainBlock" />
                <apex:commandButton action="{!addressCancelUpdateExisting}" value="Cancel" immediate="true"/>
            </apex:pageBlockButtons> 
                        
            <!-- ERROR CONDITION -->
            <apex:pageBlockSection title="Error(s) have been found..." rendered="{!(hasErrors == true)}" collapsible="false" columns="1">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Error Description" for="errors"/>
                    <apex:outputPanel >
                        <apex:outputText value="{!errorMessage}" id="errors" style="color: red; width:100%"/>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
             
            <apex:pageBlockSection title="Address section" columns="1">
	            <apex:inputField value="{!address.Address_1__c}" required="true">
	            </apex:inputField>
				<apex:inputField value="{!address.Address_2__c}">
				</apex:inputField>
				<apex:inputField value="{!address.City__c}" required="true">
				</apex:inputField>
				<apex:inputField value="{!address.State__c}" required="true">
				</apex:inputField>
				<apex:inputField value="{!address.Zip__c}" required="true">
				</apex:inputField>
				<apex:inputField value="{!address.Country__c}" required="true">
				</apex:inputField>
				<apex:inputField value="{!address.Country_Code__c}" required="true">
				</apex:inputField>
            </apex:pageBlockSection>
            
             
		</apex:pageBlock>
		    
		<apex:pageBlock title="Related Contacts" id="searchBlock">
		
			<apex:pageBlockTable id="addressCustomerAddressRecords" rendered="true" value="{!contactCustomerAddresses}" var="addr">		
				<apex:column headerValue="Action">
        			<apex:outputLink value="{!URLFOR($Action.Contact.View, addr.Contact__c)}">View</apex:outputLink>
        		</apex:column>				
				<apex:column headerValue="First Name">
        			<apex:outputText value="{!addr.Contact__r.FirstName}"></apex:outputText>
        		</apex:column>
				<apex:column headerValue="Last Name">
        			<apex:outputText value="{!addr.Contact__r.LastName}"></apex:outputText>
        		</apex:column>
				<apex:column headerValue="Is Primary">
        			<apex:inputCheckbox value="{!addr.Is_Principal_Address__c}"></apex:inputCheckbox>
        		</apex:column>
				<apex:column headerValue="Inactive">
        			<apex:inputCheckbox value="{!addr.Is_Inactive__c}"></apex:inputCheckbox>
        		</apex:column> 
        	</apex:pageBlockTable>
        	
        </apex:pageBlock>
            				
	</apex:form>
</apex:page>