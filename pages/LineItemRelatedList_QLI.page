<apex:page standardController="Quote" extensions="LineItemRelatedListCtlExt" tabStyle="Quote" id="listPage">
	
	<script type="text/javascript">
		
		function deleteconfirm(delId) {
			var r;
			
			r = confirm('Are you sure?');
			if (r == true) {
				delLine(delId);
			}
		}
	</script>
	
	<apex:form id="theForm" >
		<apex:actionfunction name="delLine" action="{!deleteLine}" reRender="theForm">
			<apex:param name="lineId" assignTo="{!deleteId}" value="" />
		</apex:actionfunction>
		
		<apex:pageMessages />
		
		<apex:pageBlock mode="detail" title="Quote Line Items">
		
			<apex:pageBlockButtons location="top">
				<apex:commandButton value="Sort" onclick="window.top.location='/apex/LineItemSort_QLI?id={!objId}&retURL=/{!objId}'" disabled="{!fatalError}" />
			</apex:pageBlockButtons>
			
			<apex:pageBlockSection columns="1" >
				<apex:pageBlockTable value="{!LineItems}" var="li" id="lineItemTable">
					
					<apex:column headerValue="Action" >
                    	<apex:outputLink value="/{!li.qli.Id}/e?retURL=/{!objId}" target="_top">Edit</apex:outputLink>
                    	&nbsp;|&nbsp;
                    	<apex:commandLink value="Del" onclick="deleteconfirm('{!li.qli.Id}');return false;"/>
                	</apex:column>
					
					<apex:column headerValue="Line #" >
                    	<apex:outputLink value="/{!li.qli.Id}" target="_blank">{!li.qli.Product2.Name}</apex:outputLink>
                	</apex:column>
                	
                	<apex:column headerValue="Product Name" >
                    	<apex:outputLink value="/{!li.qli.Product2Id}" target="_blank">{!li.qli.Product_Name__c}</apex:outputLink>
                	</apex:column>
                	
                	<apex:column headervalue="Quantity" value="{!li.qli.Quantity}" />
                	<apex:column headervalue="Contract Price" value="{!li.qli.UnitPrice}" />
                	<apex:column headervalue="Discount" value="{!li.qli.Discount_Percent__c}" />
                	<apex:column headervalue="Total Contract Price" value="{!li.qli.TotalPrice}" />
                	<apex:column headervalue="Expected Delivery" value="{!li.qli.Delivery_Date__c}" />
                	<apex:column headervalue="Fulfillment" value="{!li.qli.Fulfillment_Method__c}" />
                	<apex:column headervalue="Notes" value="{!li.qli.Notes__c}" />
                	<apex:column headervalue="Customer Location" value="{!li.qli.Customer_Location__c}" />
                	<apex:column headervalue="Customer Spec#" value="{!li.qli.Customer_Spec__c}" />
                	<apex:column headerValue="Sort Order" >
						<apex:outputField value="{!li.qli.Sort_Order__c}" />
                	</apex:column>
                	
                </apex:pageBlockTable>
			</apex:pageBlockSection>
		</apex:pageBlock>
		
	</apex:form>
</apex:page>